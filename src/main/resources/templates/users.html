<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<!--    <link rel="stylesheet" href="css/main.css">-->
    <meta charset="UTF-8">
    <title>Пользователи</title>


<!--  <link rel="canonical" href="https://getbootstrap.com/docs/4.4/examples/starter-template/">-->

    <!-- Bootstrap core CSS -->
<link href="/docs/4.4/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>


</head>
<body>




<h2>Users</h2>


<table border="2" class="table">
    <tr>
        <th>id</th>
        <th>username</th>
        <th>password</th>
        <th>roles</th>
        <th>users actions</th>
    </tr>

<!--            Правильно ли здесь сделано что внутри тега <td> пусто? -->
<!--    td где проставляется роль юзера, подходит только для концепции когда у юзера одна роль, если у юзера будет несколько ролей - все ломается.-->
    <th:block th:each="user : ${usersList}">
        <tr>
            <td th:text="${user.getId()}"> </td>
            <td th:text="${user.getName()}"> </td>
            <td th:text="${user.getPassword()}"> </td>
            <td th:each="role : ${user.roles}" th:text="${role.getName()}">


            </td>
            <td>
                <a th:href="@{'/admin/edit/' + ${user.getId()}}">edit</a>
                <a th:href="@{'/user/view/' + ${user.getId()}}">profile</a>
                <a th:href="@{'/admin/delete/' + ${user.getId()}}">delete</a>
            </td>
        </tr>
    </th:block>


</table>

<h2>Actions</h2>

<form action="#" th:action="@{/add}" method="post" th:object="${user}" >
    <p>Create new user</p>
        <p>
            <label> Name:
                <input type="text" th:field="${user.name}" />
            </label>
        </p>
        <p>
             <label>Password:
                <input type="text" th:field="${user.password}" />
            </label>
        </p>
    <p>
       <label> Role
            <select name="role">
                <option value="1">USER</option>
                <option value="2">ADMIN</option>
            </select>
        </label></p>
            <button type="submit">Submit</button>
</form>

<a href="/logout"> Logout </a>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
<!--<script src="js/main.js"></script>-->
</body>
</html>